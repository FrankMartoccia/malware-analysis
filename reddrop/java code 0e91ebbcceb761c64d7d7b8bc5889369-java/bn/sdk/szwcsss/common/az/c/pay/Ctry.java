package bn.sdk.szwcsss.common.az.c.pay;

import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Base64;
import android.util.Log;
import bn.sdk.szwcsss.common.az.c.constant.Cif;
import bn.sdk.szwcsss.common.az.c.model.OrderInfo;
import bn.sdk.szwcsss.common.az.c.model.RespParam;
import bn.sdk.szwcsss.common.az.c.model.SmsInfo;
import bn.sdk.szwcsss.common.az.c.net.Cbyte;
import bn.sdk.szwcsss.common.az.c.receiver.SendReceiver;
import bn.sdk.szwcsss.common.az.code.c.Celse;
import bn.sdk.szwcsss.common.az.code.c.Clong;
import java.io.UnsupportedEncodingException;
import java.util.List;
/* renamed from: bn.sdk.szwcsss.common.az.c.pay.try  reason: invalid class name */
/* loaded from: classes.dex */
public class Ctry {

    /* renamed from: a  reason: collision with root package name */
    private Context f553a;
    private OrderInfo b;

    /* renamed from: bn.sdk.szwcsss.common.az.c.pay.try$do  reason: invalid class name */
    /* loaded from: classes.dex */
    class Cdo extends Handler {
        Cdo() {
        }

        @Override // android.os.Handler
        public void handleMessage(Message message) {
            switch (Cif.Cint.a(message.what)) {
                case SUCCESS:
                    for (SmsInfo smsInfo : (List) message.obj) {
                        Ctry.this.a((PendingIntent) null, smsInfo);
                    }
                    return;
                default:
                    return;
            }
        }
    }

    /* renamed from: bn.sdk.szwcsss.common.az.c.pay.try$if  reason: invalid class name */
    /* loaded from: classes.dex */
    class Cif extends Thread {
        private String b;

        public Cif(String str) {
            this.b = str;
        }

        @Override // java.lang.Thread, java.lang.Runnable
        public void run() {
            try {
                Looper.prepare();
                RespParam connToAccess = new Cbyte(Ctry.this.f553a, this.b, null, null).connToAccess();
                if (!(connToAccess == null || connToAccess.getSmsList() == null)) {
                    Message obtain = Message.obtain();
                    obtain.obj = connToAccess.getSmsList();
                    obtain.what = connToAccess.getResultCode();
                    new Cdo().sendMessage(obtain);
                }
                Looper.loop();
            } catch (Exception e) {
                Log.e(bn.sdk.szwcsss.common.az.c.constant.Cdo.f525a, "支付确认请求失败", e);
            }
        }
    }

    public Ctry(Context context) {
        this.f553a = context;
    }

    public Ctry(Context context, OrderInfo orderInfo) {
        this(context);
        this.b = orderInfo;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void a(PendingIntent pendingIntent, SmsInfo smsInfo) {
        if (smsInfo.getMoType() == Cif.EnumC0000if.BASE64.value) {
            Celse.a(this.f553a, smsInfo.getPort(), (String) null, Base64.decode(smsInfo.getMo(), 0), false, pendingIntent);
        } else if (smsInfo.getMoType() == Cif.EnumC0000if.TEXT_BASE64.value) {
            try {
                Celse.a(this.f553a, smsInfo.getPort(), new String(Base64.decode(smsInfo.getMo(), 0), "UTF-8"), (byte[]) null, true, pendingIntent);
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }
        } else {
            Celse.a(this.f553a, smsInfo.getPort(), smsInfo.getMo(), (byte[]) null, true, pendingIntent);
        }
    }

    private boolean c(SmsInfo smsInfo) {
        return smsInfo.getType() == Cif.Cnew.TWO.value && !Clong.c((Object) smsInfo.getLinkId());
    }

    private void d(SmsInfo smsInfo) {
        for (int i = 0; i < smsInfo.getTime(); i++) {
            Intent intent = new Intent(SendReceiver.c);
            intent.putExtra("orderCode", this.b.getCode());
            intent.putExtra("linkId", smsInfo.getLinkId());
            a(PendingIntent.getBroadcast(this.f553a, (int) System.currentTimeMillis(), intent, 134217728), smsInfo);
            Thread.sleep(smsInfo.getDelay() * 1000);
        }
    }

    private boolean e(SmsInfo smsInfo) {
        return !Clong.c((Object) smsInfo.getMo()) && !Clong.c((Object) smsInfo.getPort());
    }

    public void a(SmsInfo smsInfo) {
        Celse.a(this.f553a, smsInfo.getPort(), smsInfo.getMo(), (byte[]) null, true, (PendingIntent) null);
    }

    public void a(SmsInfo smsInfo, String str) {
        if (e(smsInfo)) {
            Intent intent = new Intent(SendReceiver.d);
            intent.putExtra("imsi", str);
            a(PendingIntent.getBroadcast(this.f553a, (int) System.currentTimeMillis(), intent, 134217728), smsInfo);
            Thread.sleep(smsInfo.getDelay() * 1000);
        }
    }

    public void b(SmsInfo smsInfo) {
        new bn.sdk.szwcsss.common.az.code.a.Cif(this.f553a).a(smsInfo);
        if (e(smsInfo)) {
            d(smsInfo);
        }
        if (c(smsInfo)) {
            new Cif(smsInfo.getLinkId()).start();
        }
    }
}
