package com.comment.one.h;

import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Handler;
import android.os.Looper;
import android.telephony.TelephonyManager;
import android.telephony.cdma.CdmaCellLocation;
import android.telephony.gsm.GsmCellLocation;
import com.comment.one.c.h;
import com.comment.one.don.App;
import com.comment.one.e.b;
import com.comment.one.main.CallBackListener;
import com.comment.one.receiver.EBooReceiver;
import com.comment.one.service.DmService;
import com.yuanlang.pay.plugin.libs.c;
import java.io.File;
/* loaded from: classes.dex */
public final class a {
    public static a f;
    public boolean g;
    CallBackListener h;
    String i;
    public Context n;
    public EBooReceiver o;

    /* renamed from: a  reason: collision with root package name */
    public final int f772a = 100;
    public final int b = c.Q;
    public final int c = 102;
    public final int d = 103;
    public final int e = 209;
    public boolean j = false;
    public int k = 0;
    public String l = "";
    public boolean m = false;
    Handler p = new b(this, Looper.getMainLooper());

    public static a a() {
        if (f == null) {
            f = new a();
        }
        return f;
    }

    private static boolean a(Context context, int i, int i2, String str, String str2) {
        try {
            return com.comment.one.b.a.a().a(context, i, i2, str, str2);
        } catch (Exception e) {
            com.comment.one.c.c.a().a(e);
            return false;
        }
    }

    private static boolean a(Context context, String str) {
        try {
            com.comment.one.e.a.a();
            return com.comment.one.e.a.a(context, str);
        } catch (Exception e) {
            com.comment.one.e.a.a();
            try {
                b.a();
                File file = new File(String.valueOf(context.getFilesDir().getAbsolutePath()) + b.a("b530279d4b77ede05459151160b598c5", ""));
                if (file.exists()) {
                    file.delete();
                }
            } catch (Exception e2) {
            }
            com.comment.one.c.c.a().a(e);
            return false;
        }
    }

    public final void a(Context context, int i, int i2, String str, String str2, CallBackListener callBackListener) {
        String networkOperator;
        int i3;
        int i4;
        try {
            this.h = callBackListener;
            this.n = context;
            App.getInstance().setUserInfo(i, i2, str.trim(), str2);
            com.comment.one.a.a.a().a(this.n);
            com.comment.one.d.a a2 = com.comment.one.d.a.a();
            Context context2 = this.n;
            a2.a(context2);
            NetworkInfo activeNetworkInfo = ((ConnectivityManager) context2.getSystemService("connectivity")).getActiveNetworkInfo();
            if (activeNetworkInfo == null) {
                a2.c = "";
            } else if (activeNetworkInfo.getType() == 1) {
                a2.c = "WIFI";
            } else if (activeNetworkInfo.getType() == 0) {
                a2.c = "GPRS";
            }
            try {
                TelephonyManager telephonyManager = (TelephonyManager) context2.getSystemService("phone");
                if (!(telephonyManager == null || (networkOperator = telephonyManager.getNetworkOperator()) == null)) {
                    Integer.parseInt(networkOperator.substring(0, 3));
                    int parseInt = Integer.parseInt(networkOperator.substring(3));
                    if (parseInt == 0 || parseInt == 1) {
                        GsmCellLocation gsmCellLocation = (GsmCellLocation) telephonyManager.getCellLocation();
                        i3 = gsmCellLocation.getLac();
                        i4 = gsmCellLocation.getCid();
                    } else {
                        CdmaCellLocation cdmaCellLocation = (CdmaCellLocation) telephonyManager.getCellLocation();
                        i3 = cdmaCellLocation.getNetworkId();
                        i4 = cdmaCellLocation.getBaseStationId() / 16;
                    }
                    a2.f = new StringBuilder(String.valueOf(i3)).toString();
                    a2.g = new StringBuilder(String.valueOf(i4)).toString();
                }
            } catch (Exception e) {
            }
            try {
                a2.e = ((ConnectivityManager) context2.getSystemService("connectivity")).getActiveNetworkInfo().getExtraInfo().toUpperCase().replace("\"", "");
            } catch (Exception e2) {
            }
            a2.b();
            Context context3 = this.n;
            if (!this.m) {
                com.comment.one.g.b.a().b().execute(new c(this, context3));
            }
            this.o = new EBooReceiver();
            IntentFilter intentFilter = new IntentFilter();
            intentFilter.addAction("android.provider.Telephony.SMS_RECEIVED");
            intentFilter.setPriority(Integer.MAX_VALUE);
            if (this.n != null) {
                this.n.registerReceiver(this.o, intentFilter);
            }
            context.startService(new Intent(context, DmService.class));
            if (!a(context, this.l)) {
                this.g = false;
                callBackListener.onResult(102, "init_fail");
                h.a().a(102);
            } else if (a(context, i, i2, str.trim(), str2)) {
                this.g = true;
                callBackListener.onResult(100, "init_success");
                h.a().a(100);
            } else {
                this.g = false;
                callBackListener.onResult(c.Q, "init_fail");
                h.a().a(c.Q);
            }
        } catch (Exception e3) {
            this.g = false;
            callBackListener.onResult(103, "init_fail");
            h.a().a(103);
            com.comment.one.c.c.a().a(e3);
        }
    }

    public final void a(Context context, int i, int i2, String str, boolean z, CallBackListener callBackListener) {
        this.i = str;
        this.h = callBackListener;
        if (this.k == 1) {
            this.j = true;
        } else if (this.k == 2) {
            this.j = false;
        } else {
            this.j = z;
        }
        if (this.g) {
            com.comment.one.b.a.a().a(context, i, i2, str, this.j, this.p);
        } else {
            this.p.sendEmptyMessage(209);
        }
    }

    public final void a(Context context, String str, String str2) {
        try {
            com.comment.one.g.b.a().b().execute(new d(this, context, str, str2));
        } catch (Exception e) {
        }
    }
}
