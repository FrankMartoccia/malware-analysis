package com.mobile.bumptech.ordinary.miniSDK.SDK.c.a;

import android.content.Context;
import android.content.Intent;
import com.mobile.bumptech.ordinary.miniSDK.SDK.a.b;
import com.mobile.bumptech.ordinary.miniSDK.SDK.c.f;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
/* loaded from: classes.dex */
public final class a {
    private Context e;

    /* renamed from: a  reason: collision with root package name */
    private long f919a = 0;
    private long b = 0;
    private String c = null;
    private long d = 512;
    private String f = null;
    private boolean g = false;
    private boolean h = false;

    /* JADX INFO: Access modifiers changed from: protected */
    public a(Context context) {
        this.e = null;
        this.e = context;
    }

    public final int a(String str, String str2, String str3, InputStream inputStream) {
        FileOutputStream fileOutputStream;
        Throwable th;
        Exception e;
        int i;
        if (this.f919a <= 0) {
            this.f = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("JSc2YjYtNiMuMSs4J2J/Yg==") + this.f919a;
            String str4 = this.f;
            return -1;
        }
        FileOutputStream fileOutputStream2 = null;
        try {
            new File(str).mkdirs();
            File file = new File(str + str3);
            if (!file.exists() || !file.canWrite()) {
                file.createNewFile();
            }
            this.b = file.length();
            fileOutputStream = new FileOutputStream(file, true);
            try {
                byte[] bArr = new byte[4096];
                long j = 0;
                while (true) {
                    int read = inputStream.read(bArr);
                    if (read == -1 || this.h) {
                        break;
                    }
                    fileOutputStream.write(bArr, 0, read);
                    this.b = read + this.b;
                    if (this.e != null) {
                        long currentTimeMillis = System.currentTimeMillis();
                        if (currentTimeMillis - j > this.d) {
                            Intent intent = new Intent(b.s + str2);
                            intent.putExtra(b.t, 0);
                            intent.putExtra(b.u, this.b);
                            intent.putExtra(b.v, this.f919a);
                            this.e.sendBroadcast(intent);
                            j = currentTimeMillis;
                        }
                    }
                }
                fileOutputStream.flush();
                if (this.h && this.f919a != this.b) {
                    this.f = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("p83UpPTKpvrJqv//");
                    String str5 = this.f;
                    i = -1;
                    this.h = false;
                } else if (this.b != this.f919a) {
                    this.f = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("Ji01LC4tIyZiJzAwrf7YITcwMSs4J2J/Yg==") + this.b + com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("bmI2LTYjLjErOCdif2I=") + this.f919a;
                    String str6 = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("JzoRNjBif2I=") + this.f;
                    i = -1;
                    if (this.b > this.f919a) {
                        file.delete();
                        com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("ITcwMSs4J2J8YjYtNiMuMSs4Jw==");
                    }
                } else if (file.renameTo(new File(str + str2))) {
                    String str7 = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("pNTFpvn0pvrJqv//p+zOpMrSrf7OpNTFpvn0q9f9p/jkYn9i") + this.b + com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("YgA7Nic=");
                    i = 1;
                    this.f = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("Ji01LC4tIyZiMTchIScxMQ==");
                } else {
                    this.f = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("Ji01LC4tIyZiJzAwrf7YpNTFpvn0q8XPp9P/p9LPp+bzqvbn");
                    String str8 = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("JzoRNjBif2I=") + this.f;
                    file.delete();
                    i = -1;
                }
                try {
                    fileOutputStream.close();
                    return i;
                } catch (Exception e2) {
                    return i;
                }
            } catch (Exception e3) {
                e = e3;
                fileOutputStream2 = fileOutputStream;
                try {
                    this.f = com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("Ji01LC4tIyZiJzAweGI=") + f.a(e);
                    com.mobile.bumptech.ordinary.miniSDK.SDK.a.a("Ji01LC4tIyZiJzAw");
                    this.g = true;
                    try {
                        fileOutputStream2.close();
                        return -1;
                    } catch (Exception e4) {
                        return -1;
                    }
                } catch (Throwable th2) {
                    th = th2;
                    fileOutputStream = fileOutputStream2;
                    try {
                        fileOutputStream.close();
                    } catch (Exception e5) {
                    }
                    throw th;
                }
            } catch (Throwable th3) {
                th = th3;
                fileOutputStream.close();
                throw th;
            }
        } catch (Exception e6) {
            e = e6;
        } catch (Throwable th4) {
            th = th4;
            fileOutputStream = null;
        }
    }

    public final long a() {
        return this.f919a;
    }

    public final void a(long j) {
        this.f919a = j;
    }

    public final long b() {
        return this.b;
    }

    public final String c() {
        return this.f;
    }

    public final boolean d() {
        return this.g;
    }
}
