package com.mn.kt.c;

import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import com.mn.kt.a.a;
import java.util.HashMap;
import java.util.List;
import org.json.JSONArray;
import org.json.JSONObject;
/* JADX INFO: Access modifiers changed from: package-private */
/* loaded from: classes.dex */
public final class d extends Thread {

    /* renamed from: a  reason: collision with root package name */
    private /* synthetic */ a f895a;
    private final /* synthetic */ Context b;
    private final /* synthetic */ String c;
    private final /* synthetic */ int d;
    private final /* synthetic */ String[] e;
    private final /* synthetic */ String f;

    /* JADX INFO: Access modifiers changed from: package-private */
    public d(a aVar, Context context, String str, int i, String[] strArr, String str2) {
        this.f895a = aVar;
        this.b = context;
        this.c = str;
        this.d = i;
        this.e = strArr;
        this.f = str2;
    }

    @Override // java.lang.Thread, java.lang.Runnable
    public final void run() {
        String str;
        String str2;
        String str3;
        Context context;
        String str4;
        Context context2;
        a aVar;
        a aVar2;
        String str5;
        a aVar3;
        String str6;
        String str7;
        String s;
        Context context3;
        String str8;
        a aVar4;
        List list;
        String str9;
        List list2;
        String str10;
        String str11;
        String str12;
        String str13;
        Context context4;
        List list3;
        Handler handler;
        String unused;
        String str14 = null;
        Looper.prepare();
        try {
            HashMap hashMap = new HashMap();
            aVar = a.f889a;
            hashMap.put("aid", Integer.valueOf(aVar.b));
            aVar2 = a.f889a;
            hashMap.put("chid", aVar2.f885a);
            hashMap.put("prod", com.mn.kt.d.a.b());
            hashMap.put("mac", com.mn.kt.d.a.b(this.b));
            hashMap.put("screenx", Integer.valueOf(com.mn.kt.d.a.c(this.b).widthPixels));
            hashMap.put("screeny", Integer.valueOf(com.mn.kt.d.a.c(this.b).heightPixels));
            hashMap.put("plat", com.mn.kt.d.a.h(this.b));
            hashMap.put("sinfo", com.mn.kt.d.a.c());
            hashMap.put("apil", Integer.valueOf(com.mn.kt.d.a.f()));
            hashMap.put("sys", com.mn.kt.d.a.e());
            str5 = a.o;
            hashMap.put("sver", str5);
            aVar3 = a.f889a;
            hashMap.put("cpid", Integer.valueOf(aVar3.c));
            hashMap.put("ua", this.c);
            str6 = a.n;
            hashMap.put("uid", str6);
            hashMap.put("appstart", Integer.valueOf(this.d));
            hashMap.put("md", 1);
            hashMap.put("yt", 2);
            JSONArray jSONArray = new JSONArray();
            JSONObject jSONObject = new JSONObject();
            jSONObject.put("type", 0);
            str7 = a.o;
            jSONObject.put("version", str7);
            jSONArray.put(jSONObject);
            JSONObject jSONObject2 = new JSONObject();
            jSONObject2.put("type", 1);
            jSONObject2.put("version", com.mn.kt.d.a.h());
            jSONArray.put(jSONObject2);
            JSONObject jSONObject3 = new JSONObject();
            jSONObject3.put("type", 2);
            s = this.f895a.s();
            jSONObject3.put("version", s);
            jSONArray.put(jSONObject3);
            hashMap.put("verlist", jSONArray);
            JSONArray jSONArray2 = new JSONArray();
            for (int i = 0; this.e != null && i < this.e.length; i++) {
                if (this.e[i] != null) {
                    jSONArray2.put(new JSONObject(this.e[i]));
                }
            }
            if (jSONArray2.length() > 0) {
                hashMap.put("log", jSONArray2);
            }
            context3 = a.b;
            str8 = a.m;
            aVar4 = a.f889a;
            JSONObject a2 = new f(context3, 100, str8, aVar4, hashMap).a();
            int i2 = 0;
            String str15 = null;
            str = null;
            while (true) {
                try {
                    try {
                        list = a.q;
                        if (i2 >= list.size()) {
                            str9 = str15;
                            break;
                        }
                        com.mn.kt.b.a aVar5 = new com.mn.kt.b.a();
                        if (this.f == null || this.f.length() <= 0) {
                            list2 = a.q;
                            StringBuilder sb = new StringBuilder(String.valueOf((String) list2.get(i2)));
                            str10 = a.e;
                            a.d = sb.append(str10).toString();
                        } else {
                            a.d = this.f;
                        }
                        StringBuilder sb2 = new StringBuilder("updateUrl= ");
                        str11 = a.d;
                        sb2.append(str11).toString();
                        com.mn.kt.d.a.d();
                        str9 = str15;
                        for (int i3 = 0; i3 < 2; i3++) {
                            try {
                                sleep(100L);
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                            str12 = a.d;
                            str9 = aVar5.a(str12, a2);
                            if (str9 != null) {
                                break;
                            }
                        }
                        str14 = aVar5.f888a;
                        str = aVar5.b;
                        if (str9 != null || (this.f != null && this.f.length() > 0)) {
                            break;
                        }
                        i2++;
                        str15 = str9;
                    } catch (Exception e2) {
                        e = e2;
                        unused = a.c;
                        String str16 = "request update error" + e;
                        com.mn.kt.d.a.d();
                        try {
                            str14 = e.toString();
                            try {
                                a.a(0);
                                if (!"STEP_UPDATE_NORMAL".equals("STEP_UPDATE_PARSE_ERR") && !"STEP_UPDATE_PARSE_ERR".equals("STEP_UPDATE_PARSE_ERR")) {
                                    try {
                                        JSONObject jSONObject4 = new JSONObject();
                                        jSONObject4.put("errcode", 4101);
                                        jSONObject4.put("success", -1);
                                        jSONObject4.put("tid", (Object) null);
                                        jSONObject4.put("odno", (Object) null);
                                        str4 = a.m;
                                        jSONObject4.put("desc", String.valueOf(str4) + "##" + str14);
                                        String jSONObject5 = jSONObject4.toString();
                                        a aVar6 = this.f895a;
                                        context2 = a.b;
                                        aVar6.a(context2, jSONObject5);
                                    } catch (Exception e3) {
                                        e3.printStackTrace();
                                    }
                                }
                                Looper.loop();
                            } catch (Throwable th) {
                                th = th;
                                str2 = "STEP_UPDATE_PARSE_ERR";
                                if (!"STEP_UPDATE_NORMAL".equals(str2) && !"STEP_UPDATE_PARSE_ERR".equals(str2)) {
                                    try {
                                        JSONObject jSONObject6 = new JSONObject();
                                        jSONObject6.put("errcode", 4101);
                                        jSONObject6.put("success", -1);
                                        jSONObject6.put("tid", (Object) null);
                                        jSONObject6.put("odno", (Object) null);
                                        str3 = a.m;
                                        jSONObject6.put("desc", String.valueOf(str3) + "##" + str14);
                                        String jSONObject7 = jSONObject6.toString();
                                        a aVar7 = this.f895a;
                                        context = a.b;
                                        aVar7.a(context, jSONObject7);
                                    } catch (Exception e4) {
                                        e4.printStackTrace();
                                    }
                                }
                                throw th;
                            }
                        } catch (Throwable th2) {
                            th = th2;
                            str14 = str;
                            str2 = "STEP_UPDATE_PARSE_ERR";
                        }
                    }
                } catch (Throwable th3) {
                    th = th3;
                    str14 = str;
                    str2 = str14;
                    if (!"STEP_UPDATE_NORMAL".equals(str2)) {
                        JSONObject jSONObject62 = new JSONObject();
                        jSONObject62.put("errcode", 4101);
                        jSONObject62.put("success", -1);
                        jSONObject62.put("tid", (Object) null);
                        jSONObject62.put("odno", (Object) null);
                        str3 = a.m;
                        jSONObject62.put("desc", String.valueOf(str3) + "##" + str14);
                        String jSONObject72 = jSONObject62.toString();
                        a aVar72 = this.f895a;
                        context = a.b;
                        aVar72.a(context, jSONObject72);
                    }
                    throw th;
                }
            }
            if (str9 != null) {
                g gVar = new g(str9);
                a.l = gVar.b;
                list3 = a.l;
                if (list3.size() > 0) {
                    Message message = new Message();
                    Bundle bundle = new Bundle();
                    a.k = gVar.f898a;
                    message.setData(bundle);
                    message.what = 1;
                    handler = this.f895a.s;
                    handler.sendMessage(message);
                } else {
                    a.a(0);
                }
            }
            if (!"STEP_UPDATE_NORMAL".equals(str14) && !"STEP_UPDATE_PARSE_ERR".equals(str14)) {
                try {
                    JSONObject jSONObject8 = new JSONObject();
                    jSONObject8.put("errcode", 4101);
                    jSONObject8.put("success", -1);
                    jSONObject8.put("tid", (Object) null);
                    jSONObject8.put("odno", (Object) null);
                    str13 = a.m;
                    jSONObject8.put("desc", String.valueOf(str13) + "##" + str);
                    String jSONObject9 = jSONObject8.toString();
                    a aVar8 = this.f895a;
                    context4 = a.b;
                    aVar8.a(context4, jSONObject9);
                } catch (Exception e5) {
                    e5.printStackTrace();
                }
            }
        } catch (Exception e6) {
            e = e6;
            str = null;
        } catch (Throwable th4) {
            th = th4;
            str2 = null;
        }
        Looper.loop();
    }
}
