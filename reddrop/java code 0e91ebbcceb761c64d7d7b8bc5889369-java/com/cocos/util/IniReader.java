package com.cocos.util;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;
import java.util.Properties;
/* loaded from: classes.dex */
public class IniReader {
    private transient Properties current;
    private transient String currentSecion;
    protected HashMap sections = new HashMap();

    public IniReader(String filename) throws IOException {
        File file = new File(filename);
        if (file.exists()) {
            BufferedReader reader = new BufferedReader(new FileReader(filename));
            read(reader);
            reader.close();
        }
    }

    protected void read(BufferedReader reader) throws IOException {
        while (true) {
            String line = reader.readLine();
            if (line != null) {
                parseLine(line);
            } else {
                return;
            }
        }
    }

    protected void parseLine(String line) {
        String line2 = line.trim();
        if (line2.matches("\\[.*\\]")) {
            this.currentSecion = line2.replaceFirst("\\[(.*)\\]", "$1");
            this.current = new Properties();
            this.sections.put(this.currentSecion, this.current);
        } else if (line2.matches(".*=.*") && this.current != null) {
            int i = line2.indexOf(61);
            String name = line2.substring(0, i);
            String value = line2.substring(i + 1);
            this.current.setProperty(name, value);
        }
    }

    public String getValue(String section, String name) {
        Properties p = (Properties) this.sections.get(section);
        if (p == null) {
            return null;
        }
        return p.getProperty(name);
    }
}
