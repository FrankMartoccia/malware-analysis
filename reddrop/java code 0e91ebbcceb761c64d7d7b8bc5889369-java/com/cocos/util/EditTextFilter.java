package com.cocos.util;

import android.content.Context;
import android.text.InputFilter;
import android.text.Spanned;
import android.widget.EditText;
import android.widget.Toast;
/* loaded from: classes.dex */
public class EditTextFilter {
    private static Toast mToast;

    public static void lengthFilter(final Context context, EditText editText, final int max_length, final String err_msg) {
        InputFilter[] filters = {new InputFilter.LengthFilter(max_length) { // from class: com.cocos.util.EditTextFilter.1
            @Override // android.text.InputFilter.LengthFilter, android.text.InputFilter
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                int destLen = EditTextFilter.getCharacterNum(dest.toString());
                int sourceLen = EditTextFilter.getCharacterNum(source.toString());
                if (destLen + sourceLen <= max_length) {
                    return source;
                }
                if (EditTextFilter.mToast != null) {
                    EditTextFilter.mToast.cancel();
                }
                EditTextFilter.mToast = Toast.makeText(context, err_msg, 0);
                EditTextFilter.mToast.show();
                return "";
            }
        }};
        editText.setFilters(filters);
    }

    public static int getCharacterNum(String content) {
        if (content.equals("") || content == null) {
            return 0;
        }
        return content.length() + getChineseNum(content);
    }

    public static int getChineseNum(String s) {
        int num = 0;
        char[] myChar = s.toCharArray();
        for (int i = 0; i < myChar.length; i++) {
            if (((char) ((byte) myChar[i])) != myChar[i]) {
                num++;
            }
        }
        return num;
    }
}
