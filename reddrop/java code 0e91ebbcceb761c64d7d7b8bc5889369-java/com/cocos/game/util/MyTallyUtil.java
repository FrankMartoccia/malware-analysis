package com.cocos.game.util;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.telephony.TelephonyManager;
import android.util.Log;
import java.io.IOException;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
/* loaded from: classes.dex */
public class MyTallyUtil {
    private static MyTallyUtil STATIC_TALLY = null;
    private Context context;

    private MyTallyUtil() {
    }

    public MyTallyUtil init(Context context) {
        this.context = context;
        Log.v("TallyUtil", "init succ");
        return STATIC_TALLY;
    }

    public static MyTallyUtil getIns() {
        if (STATIC_TALLY == null) {
            STATIC_TALLY = new MyTallyUtil();
        }
        return STATIC_TALLY;
    }

    public void pushData(String appid, String channelId, String imei) {
        SharedPreferences sp = this.context.getSharedPreferences("tally_util_msg", 0);
        boolean isPushSucc = sp.getBoolean("push_succ", false);
        if (!isPushSucc) {
            if (imei == "" || imei == null) {
                new MyTask().execute(appid, channelId, getIMEI(this.context));
            } else {
                new MyTask().execute(appid, channelId, imei);
            }
            Log.v("TallyUtil", "execute start");
        }
    }

    public static String getIMEI(Context context) {
        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService("phone");
        String imei = telephonyManager.getDeviceId();
        return imei;
    }

    /* loaded from: classes.dex */
    class MyTask extends AsyncTask<String, Integer, Boolean> {
        MyTask() {
        }

        /* JADX INFO: Access modifiers changed from: protected */
        public Boolean doInBackground(String... arg0) {
            String appid = arg0[0];
            String channelId = arg0[1];
            String imsi = arg0[2];
            String path = "http://www.zhjnn.com:20002/advert/info/userActions?appId=" + appid + "&channelId=" + channelId + "&deviceNo=" + imsi + "&sappId=0&doType=2";
            HttpGet httpGet = new HttpGet(path);
            boolean isSucc = false;
            try {
                HttpResponse httpResponse = new DefaultHttpClient().execute(httpGet);
                if (httpResponse.getStatusLine().getStatusCode() == 200) {
                    Log.v("TallyUtil", "load succ");
                    isSucc = true;
                }
            } catch (IOException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e2) {
                e2.printStackTrace();
            }
            return Boolean.valueOf(isSucc);
        }

        /* JADX INFO: Access modifiers changed from: protected */
        public void onPostExecute(Boolean result) {
            if (result.booleanValue()) {
                SharedPreferences.Editor editor = MyTallyUtil.this.context.getSharedPreferences("tally_util_msg", 0).edit();
                editor.putBoolean("push_succ", true);
                editor.commit();
                Log.v("TallyUtil", "push succ");
            }
            super.onPostExecute((MyTask) result);
        }
    }
}
