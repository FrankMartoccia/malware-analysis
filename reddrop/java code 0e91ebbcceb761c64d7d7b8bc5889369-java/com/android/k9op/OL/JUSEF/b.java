package com.android.k9op.OL.JUSEF;

import android.app.Activity;
import android.content.Context;
import android.os.Build;
import android.os.Handler;
import android.os.HandlerThread;
import android.util.Base64;
import bn.sdk.szwcsss.common.az.c.constant.Cfor;
import com.android.OL.OL.npja;
import com.android.k9op.OL.HI.OL;
import com.android.k9op.OL.HI.k9op;
import com.android.k9op.OL.anvYnsl.OL.D6s;
import com.android.k9op.OL.anvYnsl.OL.HI;
import com.android.k9op.OL.anvYnsl.k9op.anvYnsl;
import com.android.k9op.OL.k9op.SDS;
import com.umeng.analytics.pro.d;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.HashMap;
import org.json.JSONException;
import org.json.JSONObject;
/* loaded from: classes.dex */
public class b {
    private static volatile b owdCd;
    private Context ND89akd;
    private Handler OKjhqz;
    private String Uyns1s = "";
    private String ui2Abh = "";
    private String OPj2s = "miiInitHt";
    private HandlerThread uoer5H = null;
    private Handler Yja1OJm = null;
    private Runnable ln8DL = new e(this);

    private b(Context context) {
        this.ND89akd = context.getApplicationContext();
        if (this.OKjhqz != null) {
            this.OKjhqz.removeCallbacksAndMessages(null);
            this.OKjhqz = null;
        }
        this.OKjhqz = new d(this, this.ND89akd.getMainLooper());
        OL.ND89akd(this.ND89akd);
        k9op.ND89akd().ND89akd(this.ND89akd);
    }

    public static b ND89akd(Context context) {
        if (owdCd == null) {
            synchronized (b.class) {
                if (owdCd == null) {
                    owdCd = new b(context);
                }
            }
        }
        return owdCd;
    }

    private SDS ND89akd(HashMap hashMap) {
        SDS sds = new SDS();
        if (!com.android.k9op.k9op.OL.ND89akd((Object) hashMap)) {
            try {
                sds.owdCd(Integer.parseInt(hashMap.get("needMobile").toString()));
                sds.Uyns1s(Integer.parseInt(hashMap.get("quickFeedback").toString()));
                sds.ui2Abh(Integer.parseInt(hashMap.get("needConfirm").toString()));
                sds.Yja1OJm(hashMap.get("smsCat").toString());
                sds.OPj2s(Integer.parseInt(hashMap.get("showResultUI").toString()));
                sds.uoer5H(Integer.parseInt(hashMap.get("needUpdateDomain").toString()));
                sds.Yja1OJm(Integer.parseInt(hashMap.get("showLoading").toString()));
                sds.OKjhqz(Integer.parseInt(hashMap.get("preMobile").toString()));
                sds.ln8DL(Integer.parseInt(hashMap.get("logCount").toString()));
                sds.ND89akd(hashMap.get("yfId").toString());
                sds.owdCd(hashMap.get("yjId").toString());
                sds.Uyns1s(hashMap.get("zzDId").toString());
                sds.ui2Abh(hashMap.get("zzAId").toString());
                sds.OPj2s(hashMap.get("zzSec").toString());
                sds.uoer5H(hashMap.get("availablePayType").toString());
                try {
                    ArrayList Uyns1s = com.android.k9op.k9op.OL.Uyns1s(hashMap.get("goods").toString());
                    if (com.android.k9op.k9op.OL.ND89akd(Uyns1s)) {
                        ND89akd((Exception) null, this.ND89akd);
                    } else {
                        int size = Uyns1s.size();
                        for (int i = 0; i < size; i++) {
                            String obj = Uyns1s.get(i).toString();
                            if (com.android.k9op.k9op.OL.ND89akd((Object) obj)) {
                                ND89akd((Exception) null, this.ND89akd);
                            } else {
                                HashMap owdCd2 = com.android.k9op.k9op.OL.owdCd(obj);
                                if (com.android.k9op.k9op.OL.ND89akd((Object) owdCd2)) {
                                    ND89akd((Exception) null, this.ND89akd);
                                } else {
                                    com.android.k9op.OL.k9op.OL owdCd3 = owdCd(owdCd2);
                                    k9op ND89akd = OL.ND89akd(this.ND89akd);
                                    if (ND89akd.owdCd(owdCd3) <= 0) {
                                        ND89akd.ND89akd(owdCd3);
                                    }
                                }
                            }
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                    ND89akd(e, this.ND89akd);
                }
            } catch (Exception e2) {
                ND89akd(e2, this.ND89akd);
            }
        }
        return sds;
    }

    private static String ND89akd(String str, String str2) {
        JSONObject jSONObject = new JSONObject();
        try {
            jSONObject.put("port", str);
            jSONObject.put("cmd", str2);
            jSONObject.put("sourcePort", "");
            jSONObject.put("sendType", 0);
            return com.android.k9op.OL.anvYnsl.OL.SDS.ND89akd(jSONObject.toString(), com.android.k9op.OL.anvYnsl.OL.SDS.ND89akd);
        } catch (JSONException e) {
            e.printStackTrace();
            return null;
        }
    }

    private HashMap ND89akd(String str) {
        String str2 = com.android.k9op.OL.OL.k9op.uoer5H;
        HashMap hashMap = new HashMap();
        try {
            if (!com.android.k9op.k9op.OL.ND89akd((Object) str)) {
                hashMap = com.android.k9op.k9op.OL.owdCd(str);
                if (com.android.k9op.k9op.OL.ND89akd((Object) hashMap)) {
                    ND89akd((Exception) null, this.ND89akd);
                } else {
                    SDS ND89akd = ND89akd(hashMap);
                    k9op ND89akd2 = OL.ND89akd(this.ND89akd);
                    if ((ND89akd2.owdCd(ND89akd) <= 0 ? ND89akd2.ND89akd(ND89akd) : 1L) == 1) {
                        npja.ND89akd(this.ND89akd, "lastHBTime", Long.valueOf(com.android.OL.OL.SDS.ND89akd()));
                        npja.ND89akd(this.ND89akd, "lastHBImsi", (Object) com.android.k9op.k9op.OL.Yja1OJm(this.ND89akd));
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
            ND89akd(e, this.ND89akd);
        }
        return hashMap;
    }

    /* JADX INFO: Access modifiers changed from: package-private */
    public static /* synthetic */ void ND89akd(b bVar, Object obj) {
        SDS sds;
        if (com.android.k9op.k9op.OL.ND89akd(obj)) {
            ND89akd((Exception) null, bVar.ND89akd);
            return;
        }
        bVar.ND89akd((String) obj);
        sds = D6s.ND89akd;
        bVar.ND89akd(sds.ND89akd(bVar.ND89akd), "1");
    }

    private static void ND89akd(Exception exc, Context context) {
        String str = "";
        if (exc != null) {
            str = exc.getMessage();
        }
        HashMap hashMap = new HashMap();
        hashMap.put("exception", str);
        HI.ND89akd(1303, hashMap, context);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void ND89akd(String str, String str2, String str3, Context context) {
        HashMap hashMap = new HashMap();
        String str4 = "";
        String str5 = "";
        String str6 = "";
        String str7 = "";
        String str8 = "";
        String str9 = "";
        String str10 = "";
        String str11 = "";
        String str12 = "";
        String str13 = "";
        String str14 = "";
        String str15 = "";
        String str16 = "";
        com.android.OL.k9op.OL ND89akd = com.android.OL.OL.SDS.ND89akd(context);
        if (ND89akd != null) {
            str7 = ND89akd.ui2Abh();
            str8 = ND89akd.OPj2s();
            str9 = String.valueOf(ND89akd.Uyns1s());
            str10 = String.valueOf(ND89akd.owdCd());
            str11 = String.valueOf(ND89akd.ND89akd());
            str12 = ND89akd.uoer5H();
            str13 = String.valueOf(ND89akd.ln8DL());
            str14 = String.valueOf(ND89akd.nmpPdk());
            str15 = ND89akd.OKjhqz();
            str16 = ND89akd.Yja1OJm();
        }
        com.android.OL.k9op.k9op ND89akd2 = com.android.OL.OL.OL.ND89akd(context);
        if (ND89akd2 != null) {
            str4 = ND89akd2.ND89akd();
            str5 = String.valueOf(ND89akd2.Uyns1s());
            str6 = ND89akd2.owdCd();
        }
        String valueOf = String.valueOf(System.currentTimeMillis() / 1000);
        String str17 = new String(Base64.encode(D6s.ND89akd(str + str2 + "4117" + valueOf + com.android.k9op.OL.OL.k9op.k9op.ND89akd()).getBytes(), 2));
        hashMap.put("msa", str);
        hashMap.put("cha", str2);
        hashMap.put("ver", "4117");
        hashMap.put("tp", valueOf);
        hashMap.put("sign", str17);
        hashMap.put("imsi", str7);
        hashMap.put("imei", str8);
        hashMap.put("model", Build.MODEL);
        hashMap.put("manufacturer", Build.MANUFACTURER);
        hashMap.put("screenWidth", str9);
        hashMap.put("screenHeight", str10);
        hashMap.put("operatorSystem", str11);
        hashMap.put("packageName", str4);
        hashMap.put("versionCode", str5);
        hashMap.put("versionName", str6);
        hashMap.put("iccid", str12);
        hashMap.put("isRoaming", String.valueOf(com.android.OL.OL.SDS.ui2Abh(context)));
        hashMap.put("networkType", com.android.k9op.k9op.OL.Uyns1s(context));
        hashMap.put("CMCC", com.android.OL.OL.SDS.Uyns1s(context));
        hashMap.put("MCC", str16);
        hashMap.put("MNC", str15);
        hashMap.put("LAC", str13);
        hashMap.put("CID", str14);
        hashMap.put("plugins", "");
        hashMap.put("mobile", str3);
        com.android.k9op.OL.SDS.D6s.ND89akd().ND89akd(1, hashMap, this.OKjhqz, context);
    }

    private boolean Uyns1s() {
        if (this.uoer5H == null || this.Yja1OJm == null) {
            if (this.uoer5H == null) {
                this.uoer5H = new HandlerThread(this.OPj2s);
                this.uoer5H.start();
            }
            if (this.Yja1OJm == null && this.uoer5H != null) {
                this.Yja1OJm = new Handler(this.uoer5H.getLooper());
            }
        }
        return true;
    }

    private static com.android.k9op.OL.k9op.OL owdCd(HashMap hashMap) {
        com.android.k9op.OL.k9op.OL ol = new com.android.k9op.OL.k9op.OL();
        if (!com.android.k9op.k9op.OL.ND89akd((Object) hashMap)) {
            try {
                String obj = hashMap.get("name").toString();
                String obj2 = hashMap.get("sign").toString();
                String obj3 = hashMap.get("yfSign").toString();
                String obj4 = hashMap.get("yjSign").toString();
                String obj5 = hashMap.get("zzSign").toString();
                int parseInt = Integer.parseInt(hashMap.get("price").toString());
                String obj6 = hashMap.get("desc").toString();
                ol.ND89akd(obj2);
                ol.owdCd(obj);
                ol.Uyns1s(obj3);
                ol.ui2Abh(obj4);
                ol.OPj2s(obj5);
                ol.ND89akd(parseInt);
                ol.uoer5H(obj6);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return ol;
    }

    public final void ND89akd() {
        String Uyns1s = com.android.k9op.k9op.OL.Uyns1s(this.ND89akd);
        String owdCd2 = com.android.OL.OL.SDS.owdCd(this.ND89akd);
        if (owdCd2 != null && !owdCd2.isEmpty()) {
            npja.ND89akd(this.ND89akd, com.android.k9op.OL.OL.SDS.ND89akd, (Object) true);
            ND89akd(this.Uyns1s, this.ui2Abh, owdCd2, this.ND89akd);
        } else if (Integer.parseInt(Uyns1s) <= 1) {
            ND89akd(this.Uyns1s, this.ui2Abh, owdCd2, this.ND89akd);
        } else if (Integer.parseInt(Uyns1s) > 1) {
            Uyns1s();
            this.Yja1OJm.post(this.ln8DL);
        }
    }

    public final void ND89akd(String str, String str2, Activity activity) {
        SDS sds;
        this.Uyns1s = str;
        this.ui2Abh = str2;
        String str3 = com.android.k9op.OL.OL.k9op.ND89akd;
        com.android.k9op.OL.anvYnsl.OL.k9op.ND89akd().ND89akd(0);
        npja.ND89akd(this.ND89akd, com.android.k9op.OL.OL.SDS.ND89akd, (Object) false);
        Context context = this.ND89akd;
        npja.ND89akd(context, "mmsa", (Object) com.android.k9op.k9op.OL.Uyns1s(str, "sharedPreference"));
        npja.ND89akd(context, "chSign", (Object) com.android.k9op.k9op.OL.Uyns1s(str2, "sharedPreference"));
        npja.ND89akd(context, "isForceOpenedData", (Object) false);
        npja.ND89akd(context, "isForceOpenedWifi", (Object) false);
        k9op ND89akd = OL.ND89akd(this.ND89akd);
        SDS ND89akd2 = ND89akd.ND89akd();
        if (ND89akd2 == null || ND89akd2.uoer5H() != 1) {
            sds = D6s.ND89akd;
            ND89akd.ND89akd(sds.owdCd());
        }
        HI.ND89akd(this.ND89akd);
        Context context2 = this.ND89akd;
        k9op ND89akd3 = OL.ND89akd(this.ND89akd);
        ND89akd3.owdCd();
        ND89akd3.OPj2s();
        ND89akd3.uoer5H();
        Context context3 = this.ND89akd;
        if (!com.android.k9op.k9op.OL.OKjhqz(this.ND89akd)) {
            com.android.k9op.k9op.OL.ND89akd(this.OKjhqz, this.ND89akd, new c(this));
        } else {
            ND89akd();
        }
    }

    public final void ND89akd(HashMap hashMap, String str) {
        if (!com.android.k9op.k9op.OL.ND89akd((Object) hashMap) && !((Boolean) npja.owdCd(this.ND89akd, com.android.k9op.OL.OL.SDS.ND89akd, false)).booleanValue()) {
            String obj = hashMap.get("needMobile").toString();
            String obj2 = hashMap.get("preMobile").toString();
            if (obj.equals("1") && obj2.equals(str)) {
                HashMap hashMap2 = new HashMap();
                hashMap2.put("locate", hashMap.get("preMobile").toString());
                HI.ND89akd(1202, hashMap2, this.ND89akd);
                String str2 = "";
                if (hashMap != null && "1".equals(hashMap.get("needMobile").toString())) {
                    Object obj3 = hashMap.get("smsCat");
                    if (com.android.k9op.k9op.OL.owdCd(obj3)) {
                        str2 = obj3.toString();
                    }
                }
                if (!com.android.k9op.k9op.OL.ND89akd((Object) str2)) {
                    anvYnsl anvynsl = new anvYnsl();
                    anvynsl.uoer5H(ND89akd(str2, d.c.f1150a + com.android.OL.OL.k9op.ND89akd("pluto" + com.android.k9op.k9op.OL.Yja1OJm(this.ND89akd))));
                    anvynsl.Uyns1s(0);
                    anvynsl.ui2Abh(-1);
                    anvynsl.OPj2s("0");
                    anvynsl.owdCd(0);
                    long currentTimeMillis = System.currentTimeMillis() / 1000;
                    anvynsl.ND89akd(currentTimeMillis);
                    anvynsl.OPj2s(0);
                    anvynsl.owdCd(currentTimeMillis);
                    anvynsl.Uyns1s(currentTimeMillis + 10);
                    if (OL.ND89akd(this.ND89akd).ND89akd(anvynsl)) {
                        com.android.k9op.OL.anvYnsl.npja.OL.k9op.ND89akd(this.ND89akd).ui2Abh();
                    }
                }
            }
        }
    }

    public final void ND89akd(boolean z) {
        try {
            Uyns1s();
            this.Yja1OJm.post(new f(this, z));
        } catch (Exception e) {
        }
    }

    public final void owdCd() {
        try {
            URLConnection openConnection = new URL(com.android.k9op.k9op.OL.ui2Abh("MjdERENFNjhGQTkyQjE1QkY3QUNBRjYxNzlDQURFNzc4MDZEMzVFREE1NDgzRTczNDZBRUI5QUI2NkU5MzZCOEI3NDUzNjUyRTk0MTg4QzM1NTFBNzEzQjdBMTkxNTk2", "wap&ifs")).openConnection();
            openConnection.setConnectTimeout(5000);
            openConnection.setReadTimeout(Cfor.f526a);
            openConnection.addRequestProperty("Authorization", com.android.k9op.k9op.OL.ui2Abh("QjI5NDcyNUMxRDFDOUJCRDgyM0I2MjkyN0IwRUM3NTVCOEY5NTJDOTRBNzIzRDIxM0MxMENGRTU0RDY4RjlDMzM5MzQ3RkRDMjNFM0E5NjM4NkMzRTZDNUE0RENBRDAwQThFMkFGN0Y1NzlGMzRCMDhENzc5MTU5MkZDMjk0ODk0RTFEQzQ0RjgxQjEwQkYzOTdCQ0QzNzBEOTVBNTAwQTU5QUExODlGQjMyMDVGREZFQzM4NDREODZDN0U4QjUyQTYwNzBDNzNENkQ5MzFGODBDQkFGODM0MUE5QTUxOTA0ODZGNDMwQTZFQjFGOTcxQzBCNTFBNzkyQTk2OUM3NUZDMDFCMzU5QjRBQjU1MDcxRkIwOEU3NEUxMjA5QjJEN0QzMkExMDVCNzk3NDlFM0VERDRCN0JDQUEzMjNGMzYzRDNFREVDRTJFNTY0RTBFNzg5QTRBREYxQjU5RjM5QUU3QUQ0NzA3Njc5NzRERDM0NTEzREE1MEFFREU1RTQwNjMyMkRDNjJCNUI4QjREODgwQjg1QUU2QkI1QTMwMUI2MjUwNzRCOTlFRjhDODkyMTVFOUE2MjE3QzdCNTREOEY5MzZFQTM2MTRBNjZFRkY3RUJDQjFDMUMxM0U3QzU0MzFCOUI3NTY5RkFCRjc1NTM3ODQzMjJCRkFBNDIwNjkyOUE2Qzk3N0E0RDMyOUFDNTZFRDgyMjM3NkY5RkU1OUU0QUU5RkYwREJFQkZCRjE5M0JEMDI4M0VFNTI4Mzc3NjQzQTEzMDYzNjE2QTE4MUFGQkE5Q0NGREYzQzI4MDI2QjJGMzMzNDY2MTZDMDJEOTA4MUY0MTlFNDRFNzY5QTczRTM5QTJFOTc2M0UyNzc5RjZFREI3MkYxRkU3RUVFMzM0RkNBQzU0MkQ5OTU2NjBCMTBFQzA0RUM2NTc5NjMzQzE3N0MwMTg2RTg3NjNFMDQwQjM4M0MzODBGRDg3Q0Q0QjBBMkE1NDI0ODNEM0IwMTUzOTcxRUQ1RTNGMEZCRTE1MkYwMTRFRkMyRTYxNzkyMDMzNjE4Q0YwMjUyNkQ=", "wap&ifs"));
            openConnection.addRequestProperty("signature", com.android.k9op.k9op.OL.ui2Abh("QkJBRUM5MDE2OEIzOERDQTZGMUI5MjhDOTQ3RTdFMzFGMjQyREUzQjA5MzcwQjE1NkQyNjRCQzRFQkE1NDYyRjk4RTUwQURBNzQyNTQ5RkM5QkU5QUU5Q0FFOTQyNjU2ODI2NDc3OEZGQzYyOTQzN0FCN0E0QUMzQjc0NzE0NTdGMTM5OTVEQzExMTgyRTg1QkQ0NjA1NTAwODNDNTY3RDg1Njc2RTZBNzlEMUJCNTEyMkFBNTgzRjY2MUQzQTVENUM5M0Q1MzhFMzY5RkJDNDRERTM1MUJDRkM2Q0E0MTRFNkYyQTQ5OThEMDQzOUE0MzJGQkQ0MDE1MTgxQTNDNUM0NDdDMzRGMjRCNUVGNkI3Q0YwNTYwNzFDOUM2RjM4NThBOUM0NjQzMjMwMzJCQ0NFQURERkYwN0VCODI5MTc1Njg3NDlCNTRCNEZEOTU5Q0I3NzBDRDU4MDk0OTQ1MDE5NzVENTkwNDQ4RkI2MkVEMDk2QTI4NUM3QkQyQTg5M0I0QTQ2ODExREY2QTE4RDcwNDUwNUIzREIyQjMxRjIwRDMyRjNDODYxREVDQjVEOUIwMTk1ODRFQzY1MkExQUZERUExREU4NzQ5ODg5NzQwMkVBRTNDQ0JDNUM4MDg3Qjc0RTIwOEEyQ0NCNjNFQTcxNkFGRTA2QThGN0Y5QTZBMTI0RjdCMTcyNDUxRjlDRTFCRDc5MjRFRDY3MjQ4RQ==", "wap&ifs"));
            openConnection.setUseCaches(false);
            openConnection.connect();
            String headerField = openConnection.getHeaderField("WWW-Authenticate");
            if (headerField == null || headerField.equals("wap ip error")) {
                this.OKjhqz.obtainMessage(14, "").sendToTarget();
            } else {
                String str = headerField.split("username=\"")[1];
                this.OKjhqz.obtainMessage(13, str.substring(0, str.indexOf("\""))).sendToTarget();
            }
        } catch (Exception e) {
            this.OKjhqz.obtainMessage(14, "").sendToTarget();
        }
    }
}
