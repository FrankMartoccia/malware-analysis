package com.jy.a;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import com.jy.a.d;
import com.jy.publics.JyPaySDKMain;
import com.jy.publics.PayListener;
import com.jy.publics.SdkConfig;
import com.jy.publics.service.PayResult;
import com.jy.utils.LOG;
import java.util.concurrent.locks.ReentrantLock;
/* loaded from: classes.dex */
public class c {

    /* renamed from: a  reason: collision with root package name */
    h f829a;
    private Object c;
    private Context f;
    private a h;
    private SdkConfig i;
    private ReentrantLock d = new ReentrantLock();
    private String e = "jypaysdk";
    private boolean g = false;
    g b = new g();

    /* JADX INFO: Access modifiers changed from: package-private */
    /* loaded from: classes.dex */
    public class a {

        /* renamed from: a  reason: collision with root package name */
        PayListener f835a;
        Context b;
        Bundle c;

        a() {
        }
    }

    private void a() {
        LOG.d("JyPaySDKPack", "invoke getInstance");
        d dVar = new d(this.i);
        dVar.b(JyPaySDKMain.PACKAGE_NAME);
        dVar.a(this.e);
        dVar.c("getInstance");
        dVar.a(new Object[0]);
        dVar.a(new Class[0]);
        dVar.a(true);
        dVar.a(new d.a() { // from class: com.jy.a.c.3
            @Override // com.jy.a.d.a
            public void a(Message message) {
                d dVar2 = (d) message.obj;
                if (message.what == 1) {
                    c.this.c = dVar2.d();
                    LOG.d("JyPaySDKPack", "invoke getInstance successed");
                    c.this.a((com.jy.a.a<String>) null);
                    if (c.this.g) {
                        c.this.g = false;
                        c.this.a(c.this.h);
                    }
                } else if (c.this.g) {
                    c.this.g = false;
                    LOG.d("JyPaySDKPack", "invoke getInstance fail");
                    PayListener b = dVar2.b();
                    if (b != null) {
                        PayResult payResult = new PayResult();
                        payResult.setRet(JyPaySDKMain.SDK_PAY_INIT_FAIL);
                        payResult.setMsg("dex 加载失败");
                        b.onInitResult(payResult);
                    }
                }
            }
        });
        this.f829a.a(this.f, dVar);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void a(a aVar) {
        if (aVar.c != null) {
            c(aVar.b, aVar.f835a, aVar.c);
        }
    }

    private void c(Context context, PayListener payListener, Bundle bundle) {
        LOG.d("JyPaySDKPack", "invoke start");
        d dVar = new d(this.i);
        dVar.b(JyPaySDKMain.PACKAGE_NAME);
        dVar.a(this.e);
        dVar.c("start");
        dVar.b(this.c);
        dVar.a(new Class[]{Context.class, PayListener.class, Bundle.class, SdkConfig.class});
        dVar.a(new Object[]{context, payListener, bundle, this.i});
        dVar.a(new d.a() { // from class: com.jy.a.c.1
            @Override // com.jy.a.d.a
            public void a(Message message) {
                if (message.what == 1) {
                    LOG.d("JyPaySDKPack", "invoke start successed");
                } else {
                    LOG.d("JyPaySDKPack", "invoke start fail");
                }
            }
        });
        this.f829a.a(this.f, dVar);
    }

    private void d(Context context, PayListener payListener, Bundle bundle) {
        LOG.d("JyPaySDKPack", "invoke pay");
        d dVar = new d(this.i);
        dVar.b(JyPaySDKMain.PACKAGE_NAME);
        dVar.a(this.e);
        dVar.c("pay");
        dVar.b(this.c);
        dVar.a(new Class[]{Context.class, PayListener.class, Bundle.class});
        dVar.a(new Object[]{context, payListener, bundle});
        dVar.a(new d.a() { // from class: com.jy.a.c.2
            @Override // com.jy.a.d.a
            public void a(Message message) {
                if (message.what == 1) {
                    LOG.d("JyPaySDKPack", "invoke pay successed");
                } else {
                    LOG.d("JyPaySDKPack", "invoke pay fail");
                }
            }
        });
        this.f829a.a(context, dVar);
    }

    public void a(Context context, d.a aVar) {
        d dVar = new d(this.i);
        dVar.a(this.e);
        dVar.a(aVar);
        this.f829a.b(context, dVar);
    }

    public void a(Context context, PayListener payListener, Bundle bundle) {
        if (this.c == null) {
            this.g = true;
            a aVar = new a();
            aVar.c = bundle;
            aVar.f835a = payListener;
            aVar.b = this.f;
            this.h = aVar;
            a();
            return;
        }
        this.g = false;
        c(context, payListener, bundle);
    }

    public void a(Context context, SdkConfig sdkConfig) {
        this.i = sdkConfig;
        this.f = context.getApplicationContext();
        this.f829a = this.b.a(sdkConfig, null);
        if (this.c == null) {
            if (sdkConfig.dexFileName != null) {
                this.e = sdkConfig.dexFileName;
            }
            a();
        }
    }

    public void a(final com.jy.a.a<String> aVar) {
        LOG.d("JyPaySDKPack", "invoke getSDKVersion");
        d dVar = new d(this.i);
        dVar.b(JyPaySDKMain.PACKAGE_NAME);
        dVar.a(this.e);
        dVar.c("getSDKVersion");
        dVar.b(this.c);
        dVar.a(new Class[0]);
        dVar.a(new Object[0]);
        dVar.a(new d.a() { // from class: com.jy.a.c.4
            @Override // com.jy.a.d.a
            public void a(Message message) {
                d dVar2 = (d) message.obj;
                if (message.what == 1) {
                    LOG.d("JyPaySDKPack", "invoke getSDKVersion successed version : " + dVar2.d());
                } else {
                    LOG.d("JyPaySDKPack", "invoke getSDKVersion fail");
                }
                if (aVar != null) {
                    aVar.a(c.this.i.version + "/" + ((String) dVar2.d()));
                    aVar.a().a(aVar);
                }
            }
        });
        this.f829a.a(this.f, dVar);
    }

    public void a(String str, BroadcastReceiver broadcastReceiver, Context context, Intent intent, final Handler handler) {
        LOG.d("JyPaySDKPack", "invoke getSDKVersion");
        d dVar = new d(this.i);
        dVar.b(str);
        dVar.a(this.e);
        dVar.c("onReceive");
        dVar.b(broadcastReceiver);
        dVar.a(new Class[]{Context.class, Intent.class});
        dVar.a(new Object[]{context, intent});
        dVar.a(new d.a() { // from class: com.jy.a.c.5
            @Override // com.jy.a.d.a
            public void a(Message message) {
                message.obj = ((d) message.obj).f();
                handler.sendMessage(message);
            }
        });
        this.f829a.a(context, dVar);
    }

    public void b(Context context, PayListener payListener, Bundle bundle) {
        d(context, payListener, bundle);
    }
}
