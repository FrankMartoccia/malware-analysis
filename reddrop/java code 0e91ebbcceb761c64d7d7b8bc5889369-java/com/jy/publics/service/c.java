package com.jy.publics.service;

import android.app.Service;
import android.content.ComponentName;
import android.content.Intent;
import android.os.IBinder;
import com.jy.publics.service.DefaultProxyServiceFilter;
import com.jy.utils.LOG;
import java.util.HashMap;
import java.util.Map;
/* loaded from: classes.dex */
public class c implements DefaultProxyServiceFilter.OnInvokeStopServiceTokenListener {

    /* renamed from: a  reason: collision with root package name */
    a f878a;
    private Service b;
    private ServiceInfo c;
    private String e;
    private b d = b.NO_CREATE;
    private Map<String, String> f = new HashMap(0);

    /* loaded from: classes.dex */
    public interface a {
        void a(c cVar, int i);
    }

    /* loaded from: classes.dex */
    public enum b {
        NO_CREATE,
        CREATED,
        CREATE_FAIL
    }

    /* JADX WARN: Removed duplicated region for block: B:31:0x00e3  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public int a(Service service, ServiceInfo serviceInfo) {
        LOG.d("ProxyServiceInstance", "create service start" + serviceInfo);
        this.c = serviceInfo;
        if (serviceInfo.getCreateServiceImpl() == null) {
            serviceInfo.setCreateServiceImpl(DefaultCreateServiceImpl.class.getName());
        }
        ClassLoader loader = serviceInfo.getLoader();
        if (loader == null) {
            throw new RuntimeException("ServiceInfo ClassLoader is null");
        }
        this.e = serviceInfo.getIntent().getComponent().getClassName();
        try {
            try {
                serviceInfo.setOnServiceStopListener(this);
                Service create = ((com.jy.publics.service.b) loader.loadClass(serviceInfo.getCreateServiceImpl()).newInstance()).create(service, serviceInfo);
                if (create == null) {
                    if (this.d != b.CREATED) {
                        this.d = b.CREATE_FAIL;
                    }
                    LOG.d("ProxyServiceInstance", "create service end" + this.b);
                    return -1;
                }
                create.onCreate();
                this.b = create;
                this.d = b.CREATED;
                if (this.d != b.CREATED) {
                    this.d = b.CREATE_FAIL;
                }
                LOG.d("ProxyServiceInstance", "create service end" + this.b);
                return 0;
            } catch (Exception e) {
                e.printStackTrace();
                if (this.d != b.CREATED) {
                    this.d = b.CREATE_FAIL;
                }
                LOG.d("ProxyServiceInstance", "create service end" + this.b);
                return -1;
            }
        } catch (Throwable th) {
            if (this.d != b.CREATED) {
            }
            LOG.d("ProxyServiceInstance", "create service end" + this.b);
            throw th;
        }
        if (this.d != b.CREATED) {
            this.d = b.CREATE_FAIL;
        }
        LOG.d("ProxyServiceInstance", "create service end" + this.b);
        throw th;
    }

    public ComponentName a(String str) {
        if (this.b == null || !this.f.containsKey(str)) {
            return null;
        }
        this.f.remove(str);
        LOG.d("ProxyServiceInstance", "onUnbind : " + this.c);
        this.b.onUnbind(this.c.getIntent());
        return this.c.getIntent().getComponent();
    }

    public IBinder a(ServiceInfo serviceInfo) {
        if (this.b == null) {
            return null;
        }
        LOG.d("ProxyServiceInstance", "onBind : " + serviceInfo);
        this.f.put(serviceInfo.getBindClassName(), serviceInfo.getBindClassName());
        return this.b.onBind(serviceInfo.getIntent());
    }

    public String a() {
        return this.e;
    }

    public void a(Intent intent, int i, int i2) {
        LOG.d("ProxyServiceInstance", "onStartCommand start" + this.c);
        if (this.b == null) {
            LOG.e("ProxyServiceInstance", "" + this.c.getTag() + " is null error ");
            return;
        }
        this.b.onStartCommand(intent, i, i2);
        LOG.d("ProxyServiceInstance", "onStartCommand end" + this.c);
    }

    public void a(a aVar) {
        this.f878a = aVar;
    }

    public void b() {
        if (this.b != null) {
            try {
                this.b.onDestroy();
                this.b = null;
                LOG.d("ProxyServiceInstance", " onDestroy : " + this.c);
                this.c = null;
                this.f878a = null;
            } catch (Throwable th) {
                th.printStackTrace();
            }
        }
    }

    @Override // com.jy.publics.service.DefaultProxyServiceFilter.OnInvokeStopServiceTokenListener
    public void stopSelf(int i) {
        if (this.f878a != null) {
            this.f878a.a(this, i);
        }
    }
}
