package com.jy.publics.service;

import android.app.Service;
import android.content.ComponentName;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.os.RemoteException;
import android.util.Log;
import com.jy.publics.SdkConfig;
import com.jy.publics.service.JyProxyRemoteStub;
import com.jy.publics.service.a;
import com.jy.utils.InitConfigPro;
import com.jy.utils.LOG;
import java.lang.ref.WeakReference;
/* loaded from: classes.dex */
public class JyService extends Service {

    /* renamed from: a  reason: collision with root package name */
    Runnable f869a;
    a.AbstractBinderC0011a b = new a();
    WeakReference<Handler> c;
    WeakReference<Handler> d;
    private SdkConfig e;
    private JyProxyRemoteStub f;

    /* loaded from: classes.dex */
    public class a extends a.AbstractBinderC0011a {
        public a() {
        }

        @Override // com.jy.publics.service.a
        public int a(int i, String str) {
            if (JyService.this.f869a == null) {
                return 0;
            }
            JyService.this.f869a.run();
            JyService.this.f869a = null;
            return 0;
        }

        public int a(final Bundle bundle) {
            LOG.d("JyService", "---------initPay---------" + bundle.toString());
            if (JyService.this.f == null) {
                JyService.this.a(new Runnable() { // from class: com.jy.publics.service.JyService.a.1
                    @Override // java.lang.Runnable
                    public void run() {
                        try {
                            if (JyService.this.f.check(1) == 0) {
                                JyService.this.f.initPay(bundle);
                            } else {
                                JyService.this.f869a = new b(bundle);
                            }
                        } catch (RemoteException e) {
                            e.printStackTrace();
                        }
                    }
                });
                return -1;
            }
            if (JyService.this.f.check(1) == 0) {
                JyService.this.f.initPay(bundle);
            } else {
                JyService.this.f869a = new b(bundle);
            }
            return 0;
        }

        @Override // com.jy.publics.service.a
        public int a(PayResult payResult) {
            return JyService.this.a(JyService.this.c, payResult);
        }

        public void a(Handler handler) {
            JyService.this.c = new WeakReference<>(handler);
        }

        public int b(final Bundle bundle) {
            if (JyService.this.f == null) {
                JyService.this.a(new Runnable() { // from class: com.jy.publics.service.JyService.a.2
                    @Override // java.lang.Runnable
                    public void run() {
                        try {
                            if (JyService.this.f.check(2) == 0) {
                                JyService.this.f.startPay(bundle);
                            } else if (JyService.this.f869a == null) {
                                JyService.this.f869a = new c(bundle);
                            }
                        } catch (RemoteException e) {
                            e.printStackTrace();
                        }
                    }
                });
                return -1;
            }
            JyService.this.f.startPay(bundle);
            return 0;
        }

        @Override // com.jy.publics.service.a
        public int b(PayResult payResult) {
            return JyService.this.a(JyService.this.d, payResult);
        }

        public void b(Handler handler) {
            JyService.this.d = new WeakReference<>(handler);
        }
    }

    /* loaded from: classes.dex */
    class b implements Runnable {
        private Bundle b;

        public b(Bundle bundle) {
            this.b = bundle;
        }

        @Override // java.lang.Runnable
        public void run() {
            try {
                if (JyService.this.f == null) {
                    Log.e("JyService", "can not bind JyRemoteService");
                } else {
                    JyService.this.f.initPay(this.b);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    /* loaded from: classes.dex */
    class c implements Runnable {
        private Bundle b;

        public c(Bundle bundle) {
            this.b = bundle;
        }

        @Override // java.lang.Runnable
        public void run() {
            try {
                if (JyService.this.f == null) {
                    Log.e("JyService", "can not bind JyRemoteService");
                } else {
                    JyService.this.f.startPay(this.b);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int a(WeakReference<Handler> weakReference, PayResult payResult) {
        Handler handler;
        if (!(weakReference == null || (handler = weakReference.get()) == null)) {
            Message obtain = Message.obtain();
            obtain.obj = payResult;
            obtain.what = payResult.getRet();
            handler.sendMessage(obtain);
            return 0;
        }
        return -1;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void a(final Runnable runnable) {
        bindService(new Intent(this, JyRemoteService.class), new ServiceConnection() { // from class: com.jy.publics.service.JyService.2
            @Override // android.content.ServiceConnection
            public void onServiceConnected(ComponentName componentName, IBinder iBinder) {
                JyService.this.f = JyProxyRemoteStub.Stub.asInterface(iBinder);
                if (runnable != null) {
                    runnable.run();
                }
            }

            @Override // android.content.ServiceConnection
            public void onServiceDisconnected(ComponentName componentName) {
                JyService.this.f = null;
            }
        }, 1);
    }

    @Override // android.app.Service
    public IBinder onBind(Intent intent) {
        return this.b;
    }

    @Override // android.app.Service
    public void onCreate() {
        super.onCreate();
        final InitConfigPro initConfigPro = new InitConfigPro(this);
        initConfigPro.setAfterTask(new Runnable() { // from class: com.jy.publics.service.JyService.1
            @Override // java.lang.Runnable
            public void run() {
                JyService.this.e = initConfigPro.getSdkConfig();
                Intent intent = new Intent(JyService.this, JyRemoteService.class);
                intent.putExtra("extra_sdk_config", JyService.this.e);
                JyService.this.startService(intent);
                JyService.this.a((Runnable) null);
            }
        });
        initConfigPro.start();
    }
}
