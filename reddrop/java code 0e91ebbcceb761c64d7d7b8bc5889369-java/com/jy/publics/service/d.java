package com.jy.publics.service;

import android.app.Service;
import android.content.ComponentName;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.os.Looper;
import com.jy.publics.service.c;
import com.jy.utils.LOG;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
/* loaded from: classes.dex */
public class d implements c.a {
    private Map<String, c> b = new HashMap(1);

    /* renamed from: a  reason: collision with root package name */
    Handler f880a = new Handler(Looper.getMainLooper());

    /* JADX INFO: Access modifiers changed from: private */
    public void a(Service service, ServiceInfo serviceInfo, String str) {
        try {
            c cVar = this.b.get(str);
            if (cVar == null) {
                c cVar2 = new c();
                if (cVar2.a(service, serviceInfo) == 0) {
                    cVar2.a(serviceInfo.getIntent(), 0, 0);
                    this.b.put(str, cVar2);
                    cVar2.a(this);
                }
            } else {
                cVar.a(serviceInfo.getIntent(), 0, 0);
            }
        } catch (Throwable th) {
            th.printStackTrace();
        }
    }

    public ComponentName a(String str, String str2) {
        synchronized (this.b) {
            c cVar = this.b.get(str);
            if (cVar == null) {
                return null;
            }
            return cVar.a(str2);
        }
    }

    public void a() {
        Iterator<Map.Entry<String, c>> it = this.b.entrySet().iterator();
        if (it != null) {
            while (it.hasNext()) {
                this.b.remove(it.next().getKey()).b();
            }
        }
    }

    public void a(final Service service, final ServiceInfo serviceInfo) {
        final c cVar;
        final Intent intent = serviceInfo.getIntent();
        final String className = intent.getComponent().getClassName();
        synchronized (this.b) {
            cVar = this.b.get(className);
        }
        if (cVar == null) {
            this.f880a.post(new Runnable() { // from class: com.jy.publics.service.d.1
                @Override // java.lang.Runnable
                public void run() {
                    d.this.a(service, serviceInfo, className);
                }
            });
        } else {
            this.f880a.post(new Runnable() { // from class: com.jy.publics.service.d.2
                @Override // java.lang.Runnable
                public void run() {
                    try {
                        cVar.a(intent, 0, 0);
                    } catch (Throwable th) {
                        th.printStackTrace();
                    }
                }
            });
        }
    }

    @Override // com.jy.publics.service.c.a
    public void a(c cVar, int i) {
        synchronized (this.b) {
            this.b.remove(cVar.a());
        }
        cVar.b();
    }

    public void a(String str) {
        c remove;
        synchronized (this.b) {
            remove = this.b.remove(str);
        }
        if (remove != null) {
            remove.b();
        }
    }

    public IBinder b(Service service, ServiceInfo serviceInfo) {
        IBinder a2;
        LOG.e("ProxyServiceManager", "onBind service " + serviceInfo);
        synchronized (this.b) {
            ComponentName component = serviceInfo.getIntent().getComponent();
            if (this.b.get(component.getClassName()) == null) {
                a(service, serviceInfo, component.getClassName());
            }
            c cVar = this.b.get(component.getClassName());
            if (cVar == null) {
                LOG.e("ProxyServiceManager", "can not create service " + serviceInfo);
                a2 = null;
            } else {
                a2 = cVar.a(serviceInfo);
            }
        }
        return a2;
    }
}
