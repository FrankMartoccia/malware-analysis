package com.umeng.analytics.pro;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import java.util.List;
import java.util.Map;
import org.json.JSONObject;
/* compiled from: UMCCStorageManager.java */
/* loaded from: classes.dex */
public class o {

    /* renamed from: a  reason: collision with root package name */
    private static Context f1192a;

    /* JADX INFO: Access modifiers changed from: private */
    /* compiled from: UMCCStorageManager.java */
    /* loaded from: classes.dex */
    public static final class a {

        /* renamed from: a  reason: collision with root package name */
        private static final o f1193a = new o();

        private a() {
        }
    }

    private o() {
        if (f1192a != null) {
        }
    }

    public static o a(Context context) {
        f1192a = context;
        return a.f1193a;
    }

    public void a(f fVar) {
        try {
            SQLiteDatabase a2 = b.a(f1192a).a();
            String a3 = com.umeng.analytics.pro.a.a(a2);
            String a4 = q.a(System.currentTimeMillis());
            if (a3.equals("0")) {
                fVar.a("faild", false);
                return;
            }
            if (!a3.equals(a4)) {
                com.umeng.analytics.pro.a.a(a2, fVar);
            } else {
                com.umeng.analytics.pro.a.b(a2, fVar);
            }
        } catch (Exception e) {
            fVar.a(false, false);
            by.e("load agg data error");
        } finally {
            b.a(f1192a).c();
        }
    }

    public void a(f fVar, Map<List<String>, i> map) {
        try {
            try {
                com.umeng.analytics.pro.a.a(b.a(f1192a).b(), map.values());
                fVar.a("success", false);
                b.a(f1192a).c();
            } catch (Exception e) {
                by.e("save agg data error");
                b.a(f1192a).c();
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    /* JADX WARN: Finally extract failed */
    public JSONObject a() {
        try {
            try {
                JSONObject b = com.umeng.analytics.pro.a.b(b.a(f1192a).a());
                b.a(f1192a).c();
                return b;
            } catch (Exception e) {
                by.e("upload agg date error");
                b.a(f1192a).c();
                return null;
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    public JSONObject b(f fVar) {
        try {
            try {
                JSONObject a2 = com.umeng.analytics.pro.a.a(fVar, b.a(f1192a).a());
                b.a(f1192a).c();
                return a2;
            } catch (Exception e) {
                e.printStackTrace();
                b.a(f1192a).c();
                return null;
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    public void a(f fVar, boolean z) {
        try {
            try {
                com.umeng.analytics.pro.a.a(b.a(f1192a).b(), z, fVar);
                b.a(f1192a).c();
            } catch (Exception e) {
                by.e("notifyUploadSuccess error");
                b.a(f1192a).c();
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    public void a(f fVar, String str, long j, long j2) {
        try {
            try {
                com.umeng.analytics.pro.a.a(b.a(f1192a).b(), str, j, j2);
                fVar.a("success", false);
                b.a(f1192a).c();
            } catch (Exception e) {
                by.e("package size to big or envelopeOverflowPackageCount exception");
                b.a(f1192a).c();
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    public void a(f fVar, List<String> list) {
        try {
            try {
                com.umeng.analytics.pro.a.a(fVar, b.a(f1192a).b(), list);
                b.a(f1192a).c();
            } catch (Exception e) {
                by.e("saveToLimitCKTable exception");
                b.a(f1192a).c();
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    public void b(f fVar, Map<String, k> map) {
        try {
            try {
                com.umeng.analytics.pro.a.a(b.a(f1192a).b(), map, fVar);
                b.a(f1192a).c();
            } catch (Exception e) {
                by.e("arrgetated system buffer exception");
                b.a(f1192a).c();
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    /* JADX WARN: Finally extract failed */
    public List<String> b() {
        try {
            try {
                List<String> c = com.umeng.analytics.pro.a.c(b.a(f1192a).a());
                b.a(f1192a).c();
                return c;
            } catch (Exception e) {
                by.e("loadCKToMemory exception");
                b.a(f1192a).c();
                return null;
            }
        } catch (Throwable th) {
            b.a(f1192a).c();
            throw th;
        }
    }

    public void c(f fVar, Map<List<String>, i> map) {
        try {
            com.umeng.analytics.pro.a.a(fVar, b.a(f1192a).b(), map.values());
        } catch (Exception e) {
            by.e("cacheToData error");
        } finally {
            b.a(f1192a).c();
        }
    }
}
