package com.amaz.onib;

import android.text.TextUtils;
import com.amaz.onib.r;
import com.yuanlang.pay.plugin.libs.z;
import java.util.Iterator;
/* loaded from: classes.dex */
public class cd {
    public static void a(String str, String str2, String str3) {
        String str4;
        r rVar;
        String str5;
        String str6;
        String substring = str.substring(0, str.lastIndexOf("/") + 1);
        try {
            r a2 = t.a("http://10.235.148.9/middle/mypageorder.jsp");
            a2.a(30000);
            a2.c();
            String f = a2.d().f();
            if (f.contains(str3)) {
                for (w wVar : x.a(f, "table")) {
                    if (wVar.a().contains(str3)) {
                        for (w wVar2 : x.a(wVar.a(), "a")) {
                            if (wVar2.a().contains("退订")) {
                                throw new ce(201, "已经订购");
                            }
                        }
                        continue;
                    }
                }
            }
            try {
                r a3 = t.a(str);
                a3.a(30000);
                a3.c();
                r.e d = a3.d();
                d.f();
                if ("200".equals(Integer.valueOf(d.e()))) {
                    throw new ce(z.d, "showUrl---->" + str);
                }
                try {
                    r a4 = t.a(str2);
                    a4.a(30000);
                    a4.c();
                    r.e d2 = a4.d();
                    String url = d2.a().toString();
                    if (url.contains(".jsp")) {
                        String substring2 = url.substring(0, url.indexOf(".jsp"));
                        substring = substring2.substring(0, substring2.lastIndexOf("/") + 1);
                    }
                    String str7 = "";
                    Iterator<w> it = x.a(d2.f(), "a").iterator();
                    while (true) {
                        if (!it.hasNext()) {
                            str4 = "";
                            break;
                        }
                        w next = it.next();
                        if (next.a("href") != null && next.a("href").startsWith("Detail.aspx?SPID=")) {
                            str4 = next.a("href");
                            break;
                        }
                        if (next.a("href") != null && next.a("href").startsWith("orderDeal.jsp") && next.a().contains("确认")) {
                            str7 = next.a("href");
                            str4 = "";
                            break;
                        }
                    }
                    if (!TextUtils.isEmpty(str4)) {
                        String str8 = substring + str4;
                        try {
                            r a5 = t.a(str8);
                            a5.a(30000);
                            a5.c();
                            r.e d3 = a5.d();
                            String url2 = d3.a().toString();
                            if (url2.contains(".jsp")) {
                                String substring3 = url2.substring(0, url2.indexOf(".jsp"));
                                str6 = substring3.substring(0, substring3.lastIndexOf("/") + 1);
                            } else {
                                str6 = substring;
                            }
                            Iterator<w> it2 = x.a(d3.f(), "a").iterator();
                            while (true) {
                                if (!it2.hasNext()) {
                                    break;
                                }
                                w next2 = it2.next();
                                if (next2.a("href") != null && next2.a("href").startsWith("orderDeal.jsp")) {
                                    if (next2.a().contains("确认")) {
                                        str7 = next2.a("href");
                                        rVar = a5;
                                        str5 = str6;
                                    }
                                }
                            }
                            rVar = a5;
                            str5 = str6;
                        } catch (Exception e) {
                            throw new ce(z.d, "detailUrl---->" + str8);
                        }
                    } else {
                        rVar = a4;
                        str5 = substring;
                    }
                    if (TextUtils.isEmpty(str7)) {
                        throw new ce(403, "订购地址为空");
                    }
                    String str9 = str5 + str7;
                    try {
                        String a6 = rVar.a(str9).a();
                        if (a6.contains("已成功订购")) {
                            bs.a("TAG", "订购成功");
                            throw new ce(z.b, a6);
                        }
                        throw new ce(501, "订购完成不能判断是否成功");
                    } catch (Exception e2) {
                        if (!(e2 instanceof s) || ((s) e2).a() != 404) {
                            throw new ce(z.d, "orderUrl---->" + str9);
                        }
                        throw new ce(404, "orderUrl---->" + str9);
                    }
                } catch (Exception e3) {
                    if (!(e3 instanceof s) || ((s) e3).a() != 404) {
                        throw new ce(z.d, "confirmUrl---->" + str2);
                    }
                    throw new ce(402, "confirmUrl-404错误--->" + str2);
                }
            } catch (Exception e4) {
                if (e4 instanceof ce) {
                    throw ((ce) e4);
                }
                throw new ce(z.d, "showUrl---->" + str);
            }
        } catch (Exception e5) {
            if ((e5 instanceof s) && ((s) e5).a() == 404) {
                throw new ce(402, "10.235.148.9/middle/mypageorder.jsp-->404错误");
            } else if (e5 instanceof ce) {
                throw ((ce) e5);
            } else {
                throw new ce(z.d, "10.235.148.9/middle/mypageorder.jsp-->订购地址无法打开");
            }
        }
    }
}
