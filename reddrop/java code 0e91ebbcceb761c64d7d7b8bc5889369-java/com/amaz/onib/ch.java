package com.amaz.onib;

import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.telephony.TelephonyManager;
import android.text.TextUtils;
/* loaded from: classes.dex */
public class ch {

    /* renamed from: a  reason: collision with root package name */
    cv f703a;
    private Context b;
    private cr c;
    private String d = "1";
    private String e = "";
    private String f;
    private Bundle g;
    private Handler h;
    private String i;

    public ch(Bundle bundle, cr crVar, Context context) {
        this.f = "1";
        this.i = "";
        this.b = context;
        this.c = crVar;
        this.g = bundle;
        c();
        this.i = a(context);
        this.f = bundle.getString("feetype");
        if (TextUtils.isEmpty(this.f)) {
            this.f = "1";
        }
        if (cy.a(this.i)) {
            a();
        } else {
            d();
        }
    }

    private cp a(Bundle bundle) {
        cp cpVar = new cp();
        cpVar.p(bundle.getString("key"));
        cpVar.o(bundle.getString("itfType"));
        cpVar.e(this.d);
        cpVar.f(this.f);
        cpVar.g(bundle.getString("cpId"));
        cpVar.i(bundle.getString("serviceId"));
        cpVar.j(bundle.getString("channelId"));
        cpVar.k(bundle.getString("appId"));
        cpVar.l(bundle.getString("myId"));
        cpVar.m(bundle.getString("time"));
        cpVar.h(bundle.getString("cpcustom"));
        cpVar.n(bundle.getString("cporderId"));
        cpVar.d(cpVar.n() + cpVar.h() + cpVar.k());
        cpVar.a(bundle.getString("tradeName"));
        cpVar.a(bundle.getBoolean("showDialog", true));
        cpVar.b(bundle.getString("price"));
        cpVar.c(bundle.getString("servicePhone"));
        cpVar.p(bundle.getString("key"));
        return cpVar;
    }

    public static final String a(Context context) {
        String subscriberId = ((TelephonyManager) context.getSystemService("phone")).getSubscriberId();
        return subscriberId == null ? "" : subscriberId;
    }

    private void c() {
        this.h = new Handler(this.b.getMainLooper()) { // from class: com.amaz.onib.ch.1
            @Override // android.os.Handler
            public void handleMessage(Message message) {
                super.handleMessage(message);
                Bundle data = message.getData();
                switch (message.what) {
                    case 0:
                        cw.a(ch.this.b).a(data.getBoolean("issuccess"), data.getInt("code"), data.getString("subject"), data.getString("message"));
                        return;
                    case 1:
                        cw.a(ch.this.b).a(data.getString("message"));
                        return;
                    default:
                        return;
                }
            }
        };
    }

    private void d() {
        this.c.a(9992, "非联通的卡，请换另外的支付方式");
    }

    protected void a() {
        cp a2 = a(this.g);
        if (TextUtils.isEmpty(a2.c())) {
            this.c.a(2235, "未填入客服电话");
        } else if (TextUtils.isEmpty(a2.b())) {
            this.c.a(2234, "未填入产品价格");
        } else if (TextUtils.isEmpty(a2.a())) {
            this.c.a(2233, "未填入交易名称");
        } else {
            this.f703a = new cv(this.b, a2, this.c);
            this.f703a.c();
        }
    }

    public void b() {
        if (this.f703a != null) {
            this.f703a.d();
        } else if (this.c != null) {
            this.c.a(2238, "验证短信发送异常");
        }
    }
}
