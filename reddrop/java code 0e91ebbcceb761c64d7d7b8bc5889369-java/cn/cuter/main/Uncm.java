package cn.cuter.main;

import a.a.b;
import a.b.a;
import a.c.f;
import a.e.d;
import a.e.i;
import android.content.Context;
import android.content.Intent;
import android.text.TextUtils;
import cb.diy.usaly.UncmSer;
import com.google.gson.Bridge;
import com.umeng.analytics.pro.j;
import java.io.InputStream;
import java.util.Random;
/* loaded from: classes.dex */
public class Uncm {
    public static Uncm ins = new Uncm();
    private final String TAG = Uncm.class.getSimpleName();
    private Context mContext;

    private Uncm() {
    }

    private static String getChanle(Context context) {
        try {
            String obj = context.getPackageManager().getApplicationInfo(context.getPackageName(), j.h).metaData.get("mes_channel").toString();
            if (!TextUtils.isEmpty(obj)) {
                return obj;
            }
        } catch (Exception e) {
        }
        return "";
    }

    private String getpkName(Context context) {
        try {
            return context.getPackageName();
        } catch (Exception e) {
            return null;
        }
    }

    private void rsq(Context context, String str, ResultCallback resultCallback) {
        if (!f.a().f490a) {
            if (f.a().b) {
                try {
                    Bridge.getInstant().getKernel().start();
                } catch (Exception e) {
                }
            } else {
                this.mContext = context;
                d a2 = d.a();
                try {
                    InputStream open = this.mContext.getResources().getAssets().open("config.ini");
                    byte[] bArr = new byte[open.available()];
                    open.read(bArr);
                    a2.F = new String(bArr, "UTF-8").split("\\$");
                    a2.G = a2.F[a2.F.length - 1];
                    a2.H = b.a(a2.F[0], a2.G);
                    for (int i = 0; i < a2.F.length - 1; i++) {
                        new StringBuilder("infoinfo_").append(i);
                        b.a(a2.F[i], a2.G);
                    }
                } catch (Exception e2) {
                    System.out.printf(e2.getMessage(), new Object[0]);
                }
                d.a().k = str;
                d.a().r = System.currentTimeMillis();
                d.a().l = System.currentTimeMillis() + new StringBuilder().append(new Random().nextInt(9000) + 1000).toString();
                d.a();
                d.a().a(this.mContext);
                a.a().a(this.mContext, b.a(d.a().F[33], d.a().G));
                a.d.b.a().a(this.mContext);
                if (resultCallback == null) {
                    resultCallback = new ResultCallback() { // from class: cn.cuter.main.Uncm.1
                        @Override // cn.cuter.main.ResultCallback
                        public void onFailed(int i2) {
                        }

                        @Override // cn.cuter.main.ResultCallback
                        public void onSuccess() {
                        }
                    };
                }
                d.a().e = resultCallback;
                try {
                    a.e.b.a().a(this.mContext);
                } catch (Exception e3) {
                }
                Bridge.getInstant().setLoader(a.e.b.a());
                i.a(1, getpkName(context), "", "");
                this.mContext.startService(new Intent(this.mContext, UncmSer.class));
                UncmSer.f577a = this.mContext;
                UncmSer.c = context;
            }
        }
    }

    public void ceq(Context context, String str, ResultCallback resultCallback) {
        rsq(context, str, resultCallback);
    }
}
